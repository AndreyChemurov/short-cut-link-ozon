# Сервис по укорачиванию ссылок: Ozon

## Информация
- Приложение работает на порту ```8000```
- Использовалось при создании: golang 1.16.6, postgres 13.3, linux debian 10, golangci-lint 1.41.1.
- Длина ссылки = 10 символов после домена, например, http://ozon-test-task/Q1d9b4caYm </br></br>

## Запуск приложения
```bash
git clone https://github.com/AndreyChemurov/short-cut-link-ozon.git
cd short-cut-link-ozon/
[sudo] docker-compose up
```

## Запуск тестов
```bash
make test
```

#### Информация по тестам
* Отдельный компоуз поднимает другие контейнеры, в которых работают тесты.
* После их выполнения нужно послать интерапт на завершение.

## Запуск линтеров
```bash
make lint
```
или
```bash
golangci-lint run -v ./...
```

## Архитектура
1. gRPC запрос попадает на уровень gRPC-сервера (транспортный), где происходит валидация переданных аргументов.
2. Взаимодействие с уровнем бизнес-логики происходит через 2 метода: Create (создание укороченной ссылки), Get (получение оригинальной ссылки). 
4. Взаимодействие с базой данных происходит через интерфейс Database, который описывает методы: Create (создание укороченной ссылки), Get (получение оригинальной ссылки), CheckExistenceShortLink (проверка на наличие в базе укороченной ссылки), CheckExistenceLongLink (проверка на наличие в базе оригинальной ссылки).
5. Структура postgres (неэкспортируемая) реализует интерфейс Database, создает коннекшены и выполняет запросы.

## Результаты выполнения
Общение с сервером проводилось через клиент [evans](https://github.com/ktr0731/evans).

![Screenshot_20210804_214909](https://user-images.githubusercontent.com/58785926/128239086-24b933be-e6bd-4e3e-8a60-cdff86c977db.png)
